$schema: "http://json-schema.org/draft-06/schema#"

description: seq2science gene expression configuration

properties:
  # paths to store results
  fastq_clean_dir:
    description: directory where to find the workflow rules
    default: fastq_cleaned
    type: string
  # fastq-pair
  fastq-pair:
      description: fastq synchronization
      default: ''
  # quantifier
  quantifier:
    description: which quantifier to use
    properties:
      citeseqcount:
        properties:
          count: 
            default: '-cbf 9 -cbl 16 -umif 1 -umil 8 -cells 372 --max-error 1 --bc_collapsing_dist 1 --umi_collapsing_dist 1'
      kallistobus:
        properties:
          ref:
            default: '--workflow lamanno'
          count:
            default: '-x 10XV3 --verbose --h5ad --workflow lamanno'
            
    default:
      kallistobus:
        ref: '--workflow lamanno'
        count: '-x 10XV3 --verbose --h5ad --workflow lamanno'
        
  barcodefile:
    type: string
    
  export_sce_objects:
    description: "Export scRNA count tables to SingleCellExperiment and save in RDS format"
    type: boolean   
    default: false
  
  run_sctk_qc:
    description: "Generate QC reports with singleCellTK"
    type: boolean   
    default: false
    
  sctk:
    description: "Settings for singlecellTK"
    properties:
      data_type: 
       description: "Type of data, either cell or droplet"
       type: string
      detect_mito:
        description: "Wheter to perform mitochondrial gene detection"
        type: boolean
      mito_set:
       description: "Mitochondrial gene set for quality control"
       enum: ["human-ensembl", "mouse-ensembl", "human-entrez", "mouse-entrez", "human-symbol", "mouse-symbol"]
      detect_cell:
        description: "Wheter to perform cell calling for droplet based methods"
        type: boolean
        default: true
      cell_calling:
        description: "Type of cell calling method"
        enum: ["EmptyDrops", "Knee"]

      default:
        data_type: cell
        mito_set: human-ensembl
        detect_cell: true
        cell_calling: Knee
